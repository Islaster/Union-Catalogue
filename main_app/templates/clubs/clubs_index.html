{% extends 'base.html' %}
{% load static %}
{% block content %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>

<h1>CLUBS LIST</h1>

<!-- Trigger Modal - Add club -->
<!-- <button id="addBtn" class="btn">Add Club</button><br>

<div id="modal_add_club" class="modalCustom">
            
    <div class="modal-content-custom">
        <span id="closeAdd">&times;</span>
        <form action="" method="POST">
            {% csrf_token %}
            {{ addclub_form.as_p }}

            <button class="btn" type="submit">Submit</button> 
        </form>
    </div>
</div> -->

<!-- Modal Materialize -->
<!-- <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a> -->

<!-- Modal Structure -->
<!-- <div id="modal1" class="modal">
  <div class="modal-content">
    <h4>Modal Header</h4>
    <p>A bunch of text</p>
  </div>
</div> -->

<!-- Bootstrap Modal -->
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
    Add Club
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Create a Club
              <span><button type="button" class="btn-close right" data-bs-dismiss="modal" aria-label="Close">X</button></span></h5>
        </div>
        <form action="{% url 'add_club' %}" method="POST">
            <div class="modal-body">
                {% csrf_token %}
                {{ addclub_form.as_p }}
                <div class="modal-footer">
                    <button class="btn" type="submit">Submit</button> 
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </form>
      </div>
    </div>
  </div>



{% if clubs.count > 0 %}
    {% for club in clubs %}
        <table>
            <tr>
                <th>Club Name</th>
                <th>Next Meet Date</th>
                <th>Location</th>
                <th>Description</th>
                <th>No. of members</th>
                <th>Creation Date</th>
            </tr>
            <tr>
                <!-- delete opens a 'are you sure?' page <button type="submit">Close Club</button> -->
                <td>{{ club.name }}</td>
                <td>{{ club.meet_date }}</td>
                <td>{{ club.location }}</td>
                <td>{{ club.desc }}</td>
                <td>{{ club.popul }}</td>
                <td>{{ club.create_date}} </td>
            </tr>
        </table>
    {% endfor %}
{% else %}
    <p>-- No clubs --</p>
{% endif %}

<script>
    const input = document.getElementById('id_meet_date');
    const datepicker = new TheDatepicker.Datepicker(input);
    datepicker.options.setInputFormat("Y-m-d");
    datepicker.render();
</script>




{% endblock %}